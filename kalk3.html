<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kalkulator</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="app3.js"></script>
    <style>
      td {
        pointer-events: none;
        background-color: rgb(187, 187, 187);
      }
      .active {
        background-color: #f4f4f4;
        pointer-events: auto;
      }
      .active:hover {
        background-color: #e6e6e6;
      }
    </style>
  </head>

  <body>
    <div id="#links">
      <a href="kalk1.html"><button>Kalkulator 1</button></a>
      <a href="kalk2.html"><button>Kalkulator 2</button></a>
      <a href="kalk3.html"><button>Kalkulator 3</button></a>
    </div>
    <div class="container">
      <table class="table">
        <tr>
          <th colspan="5" id="display"></th>
          <td id="clear">C</td>
        </tr>
        <tr>
          <td class="num" id="0">0</td>
          <td class="num" id="1">1</td>
          <td class="b" id="(">(</td>
          <td class="b" id=")">)</td>
          <td id="n">NEG</td>
          <td id="equal">=</td>
        </tr>
        <tr>
          <td class="op" id="a">AND</td>
          <td class="op" id="o">OR</td>
          <td class="op" id="e">NAND</td>
          <td class="op" id="u">NOR</td>
          <td class="op" id="x">XOR</td>
          <td class="op" id="z">XNOR</td>
        </tr>
        <tr id="variables">
          <td id="new">New</td>
          <td class="var" id="s0"></td>
          <td class="var" id="s1"></td>
          <td class="var" id="s2"></td>
          <td class="var" id="s3"></td>
          <td class="var" id="s4"></td>
        </tr>
        <tr>
          <td id="del">Del</td>
          <td class="var" id="s5"></td>
          <td class="var" id="s6"></td>
          <td class="var" id="s7"></td>
          <td class="var" id="s8"></td>
          <td class="var" id="s9"></td>
        </tr>
      </table>
    </div>
    <script>
      $(document).ready(function () {
        $("#clear").addClass("active");
        $(".num, .b ,#n").addClass("active");
        var counter = 0;
        var operator = 0;
        var varCount = 0;
        var state = "num";
        isOp = false;

        $("#clear").click(() => {
          $(".op, #equal").removeClass("active");
          $("#clear").addClass("active");
          $("#new").removeClass("active");
          counter = 0;
          operator = 0;
          state = "num";
          checkState();
        });
        $(".num,.var").click(() => {
          counter++;
          isOp = false;
          state = "numO";
          checkState();
        });
        $("#new").click(() => {
          varCount++;
          state = "num";
          counter = 0;
          checkState();
        });
        $("#del").click(() => {
          $("td").removeClass("active");
          $(".var").addClass("active");
          $(".var").click(function () {
            $(this).html("");
            $(this).removeClass("active");
          });
          varCount = 0;
          state = "num";
          checkState();
          $("#del").removeClass("active");
        });
        $(".op").click(() => {
          operator++;
          isOp = true;
          state = "num";
          checkState();
        });
        $("#n").click(() => {
          state = "neg";
          operator++;
          isOp = true;
          checkState();
        });
        $("#equal").click(() => {
          state = "equal";
          checkState();
        });
        function checkState() {
          if (state === "num") {
            $("td").removeClass("active");
            $(".num,.b,#clear,#new,#n").addClass("active");
            if (varCount > 0) {
              $("#del").addClass("active");
            }
          }
          if (state == "neg") {
            $("td").removeClass("active");
            $(".num,.b,#clear").addClass("active");
          }
          if (state === "numO") {
            $(".op, #equal, #n").addClass("active");
          }
          if (state === "del") {
            $("td").removeClass("active");
          }
          $(".var").each(function () {
            if ($(this).text() != "") {
              $(this).addClass("active");
            }
          });
          if (varCount > 0) {
            $("#del").addClass("active");
          }
          if (operator > 0 && counter > 0) {
            $("#equal").addClass("active");
          }
          if (operator === 0 && counter >= 1) {
            $("#new").addClass("active");
          } else {
            $("#new").removeClass("active");
          }
          if (state == "equal") {
            $("td").removeClass("active");
            $("#clear").addClass("active");
          }
          if (!isOp && counter > 0) {
            $("#equal").addClass("active");
          } else {
            $("#equal").removeClass("active");
          }
        }
      });
    </script>
  </body>
</html>
